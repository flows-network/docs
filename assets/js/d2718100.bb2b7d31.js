"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[144],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>h});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),u=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):s(s({},t),e)),o},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=u(o),h=r,m=p["".concat(l,".").concat(h)]||p[h]||d[h]||a;return o?n.createElement(m,s(s({ref:t},c),{},{components:o})):n.createElement(m,s({ref:t},c))}));function h(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,s=new Array(a);s[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var u=2;u<a;u++)s[u]=o[u];return n.createElement.apply(null,s)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},4197:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var n=o(7462),r=(o(7294),o(3905));const a={sidebar_position:4},s="DevRel automation with GitHub",i={unversionedId:"cookbook/github/devrel-engagement",id:"cookbook/github/devrel-engagement",title:"DevRel automation with GitHub",description:"GitHub is a great platform for companies and open source projects to build a developer community. A best practice for community building is to immediately respond to new users and contributors when they first engage your projects with new stars, forks, issues and PRs. But that typically requires dedicated community managers in all time zones. DevRel is hard! It is a task that is ripe for automation!",source:"@site/docs/cookbook/github/devrel-engagement.md",sourceDirName:"cookbook/github",slug:"/cookbook/github/devrel-engagement",permalink:"/docs/cookbook/github/devrel-engagement",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cookbook/github/devrel-engagement.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Streamline and automate GitHub Issue responses",permalink:"/docs/cookbook/github/issue-review-bot"},next:{title:"Concepts",permalink:"/docs/category/concepts"}},l={},u=[{value:"The use case",id:"the-use-case",level:3},{value:"The solution",id:"the-solution",level:3},{value:"Next steps",id:"next-steps",level:3}],c={toc:u};function d(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"devrel-automation-with-github"},"DevRel automation with GitHub"),(0,r.kt)("p",null,"GitHub is a great platform for companies and open source projects to build a developer community. A best practice for community building is to immediately respond to new users and contributors when they first engage your projects with new stars, forks, issues and PRs. But that typically requires dedicated community managers in all time zones. DevRel is hard! It is a task that is ripe for automation!"),(0,r.kt)("p",null,"A GitHub bot can act as the community manager and respond to the users in a very timely and consistent way across all scenarios. However, the traditional approach to create a GitHub bot requires developers to set up a webhook server and to interact with the GitHub web API directly (eg to explicitly authenticate every request)."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://flows.network/"},"Flows.network")," provides a serverless platform for developers to create and automate github workflows. You can simply program the DevRel responses into a flow function. In this tutorial, I will give a concrete example in Rust. "),(0,r.kt)("h3",{id:"the-use-case"},"The use case"),(0,r.kt)("p",null,"One of the best windows of opportunity to engage open source users is immediately after they add a GitHub star to the repo. GitHub users star a repo for a variety of different reasons. Sometimes they want to express their appreciation to the project team. Sometimes they just want to bookmark the repo for later study. The user explicitly and publicly expressed interest in the project through the star. Why not strike a follow up conversation with the user right then and there?"),(0,r.kt)("p",null,"In this use case, the team want the GitHub bot to automatically sends a welcome email to every developer who stars the repo. The welcome email could point to documentation or getting started guides, highlight issues that needs help, ask the user to follow social media, and even offer swags or awards to promote further engagement. The welcome email subject and text should be determined by the project team. "),(0,r.kt)("h3",{id:"the-solution"},"The solution"),(0,r.kt)("p",null,"We could create an automated workflow on flows.network that sends a welcome email to a GitHub repo is starred."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"I assumed that you have basic knowledge of the concepts of the flows.work. If not, please check out ",(0,r.kt)("a",{parentName:"p",href:"/docs/category/getting-started"},"Getting Started")," first.")),(0,r.kt)("p",null,"We select GitHub as the inbound connector and authenticate it's access to flows.network. It is triggered by \u201cactivity related to a repo being starred\u201d. The following figure shows how to configure the inbound connector on flows.network."),(0,r.kt)("p",null,(0,r.kt)("img",{src:o(6179).Z,width:"1596",height:"838"})),(0,r.kt)("p",null,"The outbound connector is Sendgrid, a popular email service provider.  We also need to authenticate it's access to flows.network. The action is to send an email",(0,r.kt)("strong",{parentName:"p"},".")," The following figure shows how to configure the outbound connector."),(0,r.kt)("p",null,(0,r.kt)("img",{src:o(4903).Z,width:"779",height:"409"})),(0,r.kt)("p",null,"Next, upload the Rust serverless function to flows.network. ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/second-state/flow-functions/tree/main/github/sendgrid/star-thanks-by-sendgrid/rust"},"The complete code")," is on GitHub. The function retrieves the user\u2019s ",(0,r.kt)("strong",{parentName:"p"},"public email on GitHub profile"),", and composes a custom message. It returns the email recipient, subject and body in a JSON string that can be processed by the outbound Sendgrid service. "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The Rust code needs to be complied to Wasm file before uploading. Refer to ",(0,r.kt)("a",{parentName:"p",href:"https://docs.flows.network/docs/getting-started/rust/understand-the-flow-function-in-rust"},"this article")," for more details.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'#[wasmedge_bindgen]\npub fn run(s: String) -> String {\n    let result: Result<Value> = serde_json::from_str(s.as_str());\n\n    if let Ok(pl) = result {\n        match &pl["sender"]["email"] {\n            Value::String(email) => {\n                // ensure event is star or unstar\n                if pl.get("starred_at").is_some() {\n                    if let Some(action) = pl["action"].as_str() {\n                        let sender = pl["sender"]["login"].as_str().unwrap();\n                        let repo = pl["repository"]["full_name"].as_str().unwrap();\n\n                        let subject: String;\n                        let content: String;\n\n                        if action == "created" {\n                            subject = " \ud83d\ude09 Thank you for your star!".to_string();\n                            content = format!(\n                                r#"\nHowdy {},<br/>\n                                \nWelcome to the {} community! Thank you so much for starring our repository. We are very excited to have you here.<br/>\nLook forward to your contributions,<br/>\nMaintainers at repository {}"#,\n                                sender, repo, repo\n                            );\n')),(0,r.kt)("p",null,"Finally, click on the enable button to start listening for events and webhook calls from the inbound connector (ie Github Star events).  "),(0,r.kt)("p",null,"That's it. The figure below shows the result. The user receives a email notification on the public email address in his Github profile after he stars your repo."),(0,r.kt)("p",null,(0,r.kt)("img",{src:o(3614).Z,width:"2044",height:"582"})),(0,r.kt)("h3",{id:"next-steps"},"Next steps"),(0,r.kt)("p",null,"The above example only shows a simple use case. Since the flow function on flows.network can make web services requests and access databases for persistent storage, you can do a lot more by writing code!"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Customize the email message based on the user\u2019s GitHub profile data (eg long time user vs new user)."),(0,r.kt)("li",{parentName:"ul"},"Customize the email message if the user had starred other repos in your organization."),(0,r.kt)("li",{parentName:"ul"},"If a PR from a new contributor is merged, send him/her a thank-you email. "),(0,r.kt)("li",{parentName:"ul"},"Send a Slack message to the DevRel channel every time you got 10 new stars. (This requires changing the outbound connector to Slack)"),(0,r.kt)("li",{parentName:"ul"},"If a new contributor sends a PR with a DCO signature, you could send an email to the email address he/she signed off with."),(0,r.kt)("li",{parentName:"ul"},"If a new user raised an issue, send this issue to the community Discord channel. (This requires changing the outbound connector to Discord)"),(0,r.kt)("li",{parentName:"ul"},"and many more")),(0,r.kt)("p",null,"We will add more examples soon. Stay tuned. If you have ideas to share with us, don't hesitate to let us know by filling in ",(0,r.kt)("a",{parentName:"p",href:"https://forms.gle/2V7RvpUK4BGQrBUZ6"},"this form"),"."))}d.isMDXComponent=!0},6179:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/devrel-engagement-inbound-f5d13159b7e3d7373cd6b194c5412897.jpg"},4903:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/devrel-engagement-outbound-9ed415e0879d2cf614188fe1832f849f.jpeg"},3614:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/devrel-engagement-outcome-d9dbf5b06bc01bb47a3382a9c6491be4.jpg"}}]);