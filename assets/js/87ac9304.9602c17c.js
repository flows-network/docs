"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6701],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>f});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(r),f=a,h=d["".concat(l,".").concat(f)]||d[f]||u[f]||o;return r?n.createElement(h,s(s({ref:t},p),{},{components:r})):n.createElement(h,s({ref:t},p))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=r[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},366:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));const o={sidebar_position:6},s="Web service interface",i={unversionedId:"integrations/platform-sdk-features/web-service",id:"integrations/platform-sdk-features/web-service",title:"Web service interface",description:"The webhookflows library allows you to expose your Flows function on the flows.network platform through the standard web interface to get data input or deliver results. Hence providing a direct interface between the platform and outside entities, like third-party services or user applications.",source:"@site/docs/integrations/platform-sdk-features/web-service.md",sourceDirName:"integrations/platform-sdk-features",slug:"/integrations/platform-sdk-features/web-service",permalink:"/docs/integrations/platform-sdk-features/web-service",draft:!1,editUrl:"https://github.com/flows-network/docs/tree/main/docs/integrations/platform-sdk-features/web-service.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Routing actions",permalink:"/docs/integrations/platform-sdk-features/routing-actions"},next:{title:"Slack",permalink:"/docs/integrations/slack"}},l={},c=[{value:"Usage",id:"usage",level:2},{value:"Creating a Webhook Service",id:"creating-a-webhook-service",level:3},{value:"Flows that use the <code>webhook_flows</code> crate",id:"flows-that-use-the-webhook_flows-crate",level:2}],p={toc:c};function u(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"web-service-interface"},"Web service interface"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"https://docs.rs/webhook-flows/latest/webhook_flows/"},(0,a.kt)("inlineCode",{parentName:"a"},"webhook_flows"))," library allows you to expose your ",(0,a.kt)("inlineCode",{parentName:"p"},"Flows function")," on the flows.network platform through the standard web interface to get data input or deliver results. Hence providing a direct interface between the platform and outside entities, like third-party services or user applications."),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("h3",{id:"creating-a-webhook-service"},"Creating a Webhook Service"),(0,a.kt)("p",null,"In this example, we'll show you how to create a webhook service that scrapes a webpage and returns the scraped text."),(0,a.kt)("p",null,"Here are the steps: "),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Open your ",(0,a.kt)("inlineCode",{parentName:"li"},"Cargo.toml")," file and add the following lines:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-toml"},'[dependencies]\nwebhook-flows = "0.1.0" # or the appropriate version\nweb_scraper_flows = "0.1" # or the appropriate version\ntokio = { version = "1", features = ["full"] }\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"In your Rust code, import the necessary libraries:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},"use webhook_flows::{request_received, send_response};\nuse serde_json::Value;\nuse std::collections::HashMap;\nuse tokio;\nuse web_scraper_flows::get_page_text;\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Define your main function as an asynchronous function:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'#[no_mangle]\n#[tokio::main(flavor = "current_thread")]\npub async fn run() {\n    request_received(handler).await;\n}\n')),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Finally, create your handler function which will handle the incoming request, scrape the webpage, and return the scraped text:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'async fn handler(_qry: HashMap<String, Value>, _body: Vec<u8>) {\n    let url = _qry.get("url").unwrap().as_str().unwrap();\n    match get_page_text(&url).await {\n        Ok(text) => send_response(\n            200,\n            vec![(String::from("content-type"), String::from("text/html"))],\n            text.as_bytes().to_vec(),\n        ),\n\n        Err(_e) => send_response(\n            200,\n            vec![(String::from("content-type"), String::from("text/html"))],\n            _e.as_bytes().to_vec(),\n        ),\n    };\n}\n')),(0,a.kt)("p",null,"After you've uploaded your repository to ",(0,a.kt)("inlineCode",{parentName:"p"},"Flows Network")," to compile, you'll get a unique URL in the Webhook Endpoint section, this is a link to your webhook function. You can now share this URL for external use."),(0,a.kt)("p",null,(0,a.kt)("img",{src:r(5467).Z,width:"708",height:"390"})),(0,a.kt)("p",null,"That's it! Your webhook service is now ready. When called with an HTTP request containing a URL as a query parameter, it will scrape the webpage at that URL and return the scraped text."),(0,a.kt)("h2",{id:"flows-that-use-the-webhook_flows-crate"},"Flows that use the ",(0,a.kt)("inlineCode",{parentName:"h2"},"webhook_flows")," crate"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/flows-network/webhook-airtable"},(0,a.kt)("inlineCode",{parentName:"a"},"webhook-airtable"))," . The ",(0,a.kt)("inlineCode",{parentName:"li"},"webhook_flows")," crate is used to create a webhook service that collects user input from a form (Name, Notes), and sends this data to a predefined Airtable base and table.")),(0,a.kt)("p",null,"Please note that for these services to interact with the outside world, the calling party needs to make an HTTP request to the flow function hosted on the platform. The function will process the request and return the results back to the calling party."))}u.isMDXComponent=!0},5467:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/lambda-endpoint-c1124ccfdc7cde94a5a7ba93299b3f64.png"}}]);