"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4795],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>h});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var s=n.createContext({}),u=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},c=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=u(o),h=r,f=d["".concat(s,".").concat(h)]||d[h]||p[h]||a;return o?n.createElement(f,l(l({ref:t},c),{},{components:o})):n.createElement(f,l({ref:t},c))}));function h(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,l=new Array(a);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<a;u++)l[u]=o[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,o)}d.displayName="MDXCreateElement"},1554:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var n=o(7462),r=(o(7294),o(3905));const a={sidebar_position:1},l="Hello world",i={unversionedId:"getting-started-developer/hello-world",id:"getting-started-developer/hello-world",title:"Hello world",description:"In this artile, I will walk you through a very simple flow function. It exposes an HTTP endpoint. You can trigger the flow function by sending an HTTP request to the endpoint, and the flow function will echo back the msg parameter in the HTTP response.",source:"@site/docs/getting-started-developer/hello-world.md",sourceDirName:"getting-started-developer",slug:"/getting-started-developer/hello-world",permalink:"/docs/getting-started-developer/hello-world",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started-developer/hello-world.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/docs/category/getting-started"},next:{title:"A Hello World Discord bot",permalink:"/docs/getting-started-developer/hello-world-discord"}},s={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Prepare the source code",id:"prepare-the-source-code",level:2},{value:"Import, build and deploy",id:"import-build-and-deploy",level:2},{value:"Test it!",id:"test-it",level:2},{value:"Code walkthrough",id:"code-walkthrough",level:2},{value:"An exercise",id:"an-exercise",level:2}],c={toc:u};function p(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"hello-world"},"Hello world"),(0,r.kt)("p",null,"In this artile, I will walk you through a very simple flow function. It exposes an HTTP endpoint. You can trigger the flow function by sending an HTTP request to the endpoint, and the flow function will echo back the ",(0,r.kt)("inlineCode",{parentName:"p"},"msg")," parameter in the HTTP response."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"You will need a GitHub account to log into ",(0,r.kt)("a",{parentName:"p",href:"https://flows.network/"},"flows.network"),". It's free."),(0,r.kt)("h2",{id:"prepare-the-source-code"},"Prepare the source code"),(0,r.kt)("p",null,"Flows.network makes extensive use of GitOps. It uses GitHub to store and manage the source code for all flow functions. You will need to\nput your flow function's source code in a GitHub repo you have admin access to. Usually, your personal GitHub account is a good place to host your code.\nThe build and deploy operations on flows.network are automatically triggered when you push changes to the code in the GitHub repo."),(0,r.kt)("p",null,"For this tutorial, we created ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/flows-network/hello-world"},"a hello world GitHub repo")," for you to fork.\nOnce you forked it into your personal account, let's import it into flows.network."),(0,r.kt)("h2",{id:"import-build-and-deploy"},"Import, build and deploy"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://flows.network/flow/new"},"Click here")," to import the source code for the flow function into flows.network."),(0,r.kt)("p",null,"Click on the ",(0,r.kt)("strong",{parentName:"p"},"Add new authentication")," button to grant flows.network access to your GitHub repos."),(0,r.kt)("p",null,"Next, select your own GitHub account as the Organization, and then select the hello world repo you just forked."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"If you have many GitHub repos, you can search for any specific repo in the search box.")),(0,r.kt)("p",null,(0,r.kt)("img",{src:o(9854).Z,width:"1164",height:"643"})),(0,r.kt)("p",null,"Next, click on the ",(0,r.kt)("strong",{parentName:"p"},"Build")," button to compile and build the flow function using the source code from the selected GitHub repo."),(0,r.kt)("p",null,"Finally, click on ",(0,r.kt)("strong",{parentName:"p"},"Deploy")," button to deploy the flow function. You will be redirected to the flow details page, where you can check for\nservice status and logs. "),(0,r.kt)("p",null,(0,r.kt)("img",{src:o(3039).Z,width:"1612",height:"748"})),(0,r.kt)("p",null,"On the flow details page, you can see how to trigger the flow function. In this case, it is triggered by an incoming HTTP request.\nThe URL endpoint is shown on this page."),(0,r.kt)("h2",{id:"test-it"},"Test it!"),(0,r.kt)("p",null,"You can simply type the webhook URL in your browser to trigger the flow function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://code.flows.network/webhook/5VtSyNi1Vcsd4wQDgmcH?msg=I+am+a+Rustacean\n")),(0,r.kt)("p",null,"Or, you can use ",(0,r.kt)("inlineCode",{parentName:"p"},"curl")," to send a HTTP GET request to the webhook URL."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"curl https://code.flows.network/webhook/5VtSyNi1Vcsd4wQDgmcH?msg=I+am+a+Rustacean\n")),(0,r.kt)("p",null,"In both cases, the outputs are as follows."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"Welcome to flows.network.\nYou just said: 'I am a Rustacean'.\nLearn more at: https://github.com/flows-network/hello-world\n")),(0,r.kt)("h2",{id:"code-walkthrough"},"Code walkthrough"),(0,r.kt)("p",null,"The source code for the flow function is written in the Rust programming language. It is very easy to understand. The ",(0,r.kt)("inlineCode",{parentName:"p"},"run()")," function\nis called by flows.network when it receives a trigger event. In this case, the trigger is an incoming HTTP request to the flow function's\nURL endpoint."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"pub async fn run() -> anyhow::Result<()> {\n    request_received(|headers, qry, body| {\n        handler(headers, qry, body)\n    }).await;\n    Ok(())\n}\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"request_received()")," function is provided by the flows.network SDK to receive the headers, query parameters, and body of the HTTP\nrequest. It passes those data to the ",(0,r.kt)("inlineCode",{parentName:"p"},"handler()")," function, which extracts the value for the ",(0,r.kt)("inlineCode",{parentName:"p"},"msg")," query parameter and then sends back an HTTP\nresponse."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'async fn handler(headers: Vec<(String, String)>, qry: HashMap<String, Value>, _body: Vec<u8>) {\n    let msg = qry.get("msg").unwrap();\n    let resp = format!("Welcome to flows.network.\\nYou just said: \'{}\'.\\nLearn more at: https://github.com/flows-network/hello-world\\n", msg);\n\n    send_response(\n        200,\n        vec![(String::from("content-type"), String::from("text/html"))],\n        resp.as_bytes().to_vec(),\n    );\n}\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"When the flow function is deployed, the platform calls its ",(0,r.kt)("inlineCode",{parentName:"p"},"run()"),", which calls ",(0,r.kt)("inlineCode",{parentName:"p"},"request_received()")," for the first time. It generates a random URL endpoint and registers the flow function to be triggered by HTTP requests to that endpoint.")),(0,r.kt)("p",null,"The flows.network platform retrieves the Rust source code from your GitHub repo and then compiles it for you. Of course, you can also\ncompile it locally by installing the Rust compiler toolchain and then run the command."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cargo build --target wasm32-wasi --release\n")),(0,r.kt)("h2",{id:"an-exercise"},"An exercise"),(0,r.kt)("p",null,"You can enable POST requests by uncommenting the following line in the ",(0,r.kt)("inlineCode",{parentName:"p"},"handler()")," function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let msg = String::from_utf8(body).unwrap_or("".to_string());\n')),(0,r.kt)("p",null,"Commit and push to GitHub. Wait for the flow function to build and become ready again. Open a terminal and send the HTTP POST request to the webhook using ",(0,r.kt)("inlineCode",{parentName:"p"},"curl"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST https://code.flows.network/webhook/5VtSyNi1Vcsd4wQDgmcH -d "I am a Rustacean"\n')),(0,r.kt)("p",null,"That's it. Now you have learnt the basics of a flow function. Let's create a more useful flow function in the next chapter."))}p.isMDXComponent=!0},9854:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/hello-world-01-49d47216821f5e333fd7150ad040994c.png"},3039:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/hello-world-02-65800468759a09bdbe4d557e13c25c6a.png"}}]);