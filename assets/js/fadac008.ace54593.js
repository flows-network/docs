"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[517],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),f=o,m=p["".concat(c,".").concat(f)]||p[f]||d[f]||a;return n?r.createElement(m,i(i({ref:t},u),{},{components:n})):r.createElement(m,i({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1717:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var r=n(7462),o=(n(7294),n(3905));const a={sidebar_position:2},i="Understand the flow function",s={unversionedId:"getting-started/javascript/understand-the-flow-function-in-javascript",id:"getting-started/javascript/understand-the-flow-function-in-javascript",title:"Understand the flow function",description:"An important feature of flows.network is that its SaaS API flows are programmable. For example, in the Getting Started example, we could write code in the flow function to transform and filter the event received from GitHub, and construct a customized message for Slack.",source:"@site/docs/getting-started/javascript/understand-the-flow-function-in-javascript.md",sourceDirName:"getting-started/javascript",slug:"/getting-started/javascript/understand-the-flow-function-in-javascript",permalink:"/docs/getting-started/javascript/understand-the-flow-function-in-javascript",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started/javascript/understand-the-flow-function-in-javascript.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Step by Step Guide in JavaScript",permalink:"/docs/getting-started/javascript/step-by-step-guide"},next:{title:"Cookbook",permalink:"/docs/category/cookbook"}},c={},l=[{value:"Create your own",id:"create-your-own",level:2}],u={toc:l};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"understand-the-flow-function"},"Understand the flow function"),(0,o.kt)("p",null,"An important feature of flows.network is that its SaaS API flows are programmable. For example, in the Getting Started example, we could write code in the flow function to transform and filter the event received from GitHub, and construct a customized message for Slack."),(0,o.kt)("p",null,"Let\u2019s first review the simple wasm flow function we published for the ",(0,o.kt)("a",{parentName:"p",href:"/docs/getting-started/javascript/step-by-step-guide"},"Getting Started guide"),". It is written in ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/second-state/flow-functions/tree/main/getting-started/javascript"},"JavaScript"),". The Rust version of this flow function can be found here. The flow is triggered when someone comments on an issue on the connected GitHub repo. The flow function takes the GitHub event message as the input argument, and parses important data fields, such as ",(0,o.kt)("inlineCode",{parentName:"p"},"action")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"comment"),", from the message."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'(s) => {\n    let x = JSON.parse(s);\n    switch(x["action"]){\n        case "created":\n            ... ...\n    }\n    ... ...\n}\n')),(0,o.kt)("p",null,"Then, the flow function constructs and returns a new message for the Slack API. The outbound connector receives the return value from the flow function and forwards it to Slack. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'(s) => {\n    let x = JSON.parse(s);\n    ... ...\n        case "created":\n            body = x["comment"]["body"];\n            html_url = x["comment"]["html_url"];\n            break;\n    }\n\n    ... ...\n        return body.replace(/(?:\\\\[rn])+/g, "\\n") + "\\n" + html_url;\n    ... ...\n}\n')),(0,o.kt)("p",null,"You can upload the ",(0,o.kt)("inlineCode",{parentName:"p"},"getting_started.js")," file to the flows.network flow as shown in Getting Started."),(0,o.kt)("h2",{id:"create-your-own"},"Create your own"),(0,o.kt)("p",null,"Now you can add your own logic to the flow function. Here are some examples and ideas to get you started."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The flow function could only forward comments containing a tag or command phrase. "),(0,o.kt)("li",{parentName:"ul"},"The flow function could only forward comments from a certain group of users."),(0,o.kt)("li",{parentName:"ul"},"The flow function could only forward comments that demonstrate strong sentiments.")),(0,o.kt)("p",null,"The flow function could also transform the message sent to Slack."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"GitHub short links, such as issue numbers and PR numbers, could be expanded by the flow function."),(0,o.kt)("li",{parentName:"ul"},"The flow function could add links or context from the parent GitHub issue."),(0,o.kt)("li",{parentName:"ul"},"The flow function could compute and add the time lapsed from the last comment in the same issue.")),(0,o.kt)("p",null,"Remember to send us a ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/second-state/flow-functions/"},"PR")," if you created a new flow function and wanted to share!"))}d.isMDXComponent=!0}}]);